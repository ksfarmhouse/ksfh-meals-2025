@page
@model AdminModel
@{
    ViewData["Title"] = "Admin Menu";
    ViewData["ActivePage"] = "Admin";
    ViewData["ActiveTab"] = "Edit Menu";
}

<head>
    <link rel="stylesheet" href="~/css/style.css" />
    <link rel="stylesheet" href="~/css/adminAI.css" />
</head>

<script src="~/js/adminAI.js"></script>

<!-- Admin navigation bar -->
<nav class="navbar-expand-sm bg-white border-bottom mb-3">
    <ul class="navbar-nav">
        <!-- Edit Menu tab -->
        <li>
            <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "Edit Menu" ? "active" : "") text-dark"
               asp-area=""
               asp-page="/Admin">
                Edit Menu
            </a>
        </li>

        <!-- Edit Members tab -->
        <li>
            <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "Edit Members" ? "active" : "") text-dark"
               asp-area=""
               asp-page="/EditMembers">
                Edit Members
            </a>
        </li>
    </ul>
</nav>

<!-- Import Kiva File -->
<div class="ai-section">
    <div class="ai-header">✨ Auto-Fill Menu from PDF/Image</div>

    <input type="file" id="fileInput" accept="image/*,application/pdf" onchange="previewFile()">

    <div id="previewContainer" class="preview-box">
        <img id="previewImg" style="display:none">
        <div id="pdfIcon" style="display:none">📄</div>
        <span id="fileName"></span>
    </div>

    <div>
        <button type="button" id="extractBtn" class="btn-ai" onclick="extractMenu()">
            Auto-Fill Form
        </button>
        <span id="aiStatus" class="status-text"></span>
    </div>
</div>

<!-- MAIN ADMIN CONTENT -->
<form method="post">
    <div id="MenuEdit">
        <!-- WEEKDAY MENU TABLE -->
        <table class="MenuTable">
            <thead class="text-center">
                <tr>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                </tr>
            </thead>
            <tbody>
                <!-- Lunch Row -->
                <tr>
                    <td><input class="form-input" type="text" name="ML" placeholder="Lunch" value="@Model.ML" required /></td>
                    <td><input class="form-input" type="text" name="TL" placeholder="Lunch" value="@Model.TL" required /></td>
                    <td><input class="form-input" type="text" name="WL" placeholder="Lunch" value="@Model.WL" required /></td>
                    <td><input class="form-input" type="text" name="THL" placeholder="Lunch" value="@Model.THL" required /></td>
                    <td><input class="form-input" type="text" name="FL" placeholder="Lunch" value="@Model.FL" required /></td>
                </tr>

                <!-- Dinner Row -->
                <tr>
                    <td><input class="form-input" type="text" name="MD" placeholder="Dinner" value="@Model.MD" required /></td>
                    <td><input class="form-input" type="text" name="TD" placeholder="Dinner" value="@Model.TD" required /></td>
                    <td><input class="form-input" type="text" name="WD" placeholder="Dinner" value="@Model.WD" required /></td>
                    <td><input class="form-input" type="text" name="THD" placeholder="Dinner" value="@Model.THD" required /></td>
                    <td><input class="form-input" type="text" name="FD" placeholder="Dinner" value="@Model.FD" required /></td>
                </tr>
            </tbody>
        </table>

        <!-- WEEKEND MENU TABLE -->
        <table class="MenuTable mt-4">
            <thead class="text-center">
                <tr>
                    <th>Saturday</th>
                    <th>Sunday</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input class="form-input" type="text" name="SA" placeholder="Lunch" value="@Model.SA" required /></td>
                    <td><input class="form-input" type="text" name="SU" placeholder="Lunch" value="@Model.SU" required /></td>
                </tr>
            </tbody>
        </table>

        <!-- SAVE BUTTON -->
        <div class="text-center admin-action mt-4">
            <input type="submit" class="btn-save" value="Save" />

            <p class="confirmation-message">@Model.SaveScheduleMessage</p>

            <p>The "Save" button updates the menu with the new values entered above.</p>
            <p>You must input a value for every box to save.</p>
        </div>
    </div>
</form>

<!-- ROLLOVER MEALS SECTION -->
<div class="text-center admin-action mt-5">
    <form asp-page-handler="Rollover">
        <input type="submit" class="btn-save" value="Rollover Meals" />
    </form>

    <p class="confirmation-message">@Model.SaveRolloverMessage</p>
    <p>
        The "Rollover Meals" button returns all temporary meals back to permanent signups.<br />
        It also lists out-of-house and alumni meals for the Treasurer page.
    </p>
</div>

<!-- RESET MEALS SECTION -->
<div class="text-center admin-action mt-5">
    <form asp-page-handler="ResetMeals">
        <input type="submit" class="btn-save" value="Reset Meals" />
    </form>

    <p class="confirmation-message">@Model.SaveResetMessage</p>
    <p>The "Reset Meals" button resets meals back to defaults based on member status.</p>
</div>

<!-- UPDATE NEW MEMBERS SECTION -->
<div class="text-center admin-action mt-5">
    <form asp-page-handler="UpdateNM">
        <input type="submit" class="btn-save" value="Update New Members" />
    </form>

    <p class="confirmation-message">@Model.UpdateNMMessage</p>
    <p>The "Update New Members" button gives all New Members the "In House" status.</p>
</div>
