@page
@model MealSignUpsModel
@{
    ViewData["Title"] = "Weekly Sign Up";
    ViewData["ActivePage"] = "Weekly Sign Up";
}

<head>
    <link rel="stylesheet" href="~/css/style.css" />
</head>

<form method="post">
    <div>
        <!-- Member ID input section -->
        <h3>Enter ID</h3>
        <input type="text" asp-for="ID" placeholder="ID" />
        <input type="submit" value="Enter" />

        <!-- Show selected member name -->
        @if (Model.MemberToShow != null)
        {
            <p class="member-name">
                <strong>Member:</strong> @Model.MemberToShow.FirstName @Model.MemberToShow.LastName 
            </p>
        }

        <!-- Instructions -->
        <p class="text-center">
            This is the weekly meal sign-up. If you have a meeting or any event that causes you to miss a meal, mark it here.
            Your schedule will revert to your default plan at the end of each week.
        </p>
        <p class="text-center" style="font-weight: bold;">
            Edits here will not affect your permanent meal plan.
        </p>
    </div>

    <!-- Meal sign-up tables (only show if a member was selected) -->
    <div>
        @if (Model.MemberToShow != null)
        {
            <input type="hidden" asp-for="MemberID" />

            <!-- Weekday Table (Mon–Fri) -->
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>Monday</th>
                        <th>Tuesday</th>
                        <th>Wednesday</th>
                        <th>Thursday</th>
                        <th>Friday</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Lunch row -->
                    <tr>
                        <th>Lunch</th>
                        @for (int i = 0; i < Model.MemberToShow.DefaultSignUp.Length-2; i += 2)
                        {
                            var Items = Model.GetLunchItems(Model.MemberToShow.TempSignUp[i]);
                            <td>
                                <select asp-items="Items" name="@Model.comboBoxNames[i]"></select>
                            </td>
                        }
                    </tr>

                    <!-- Dinner row -->
                    <tr>
                        <th>Dinner</th>
                        @for (int i = 1; i < Model.MemberToShow.TempSignUp.Length - 2; i += 2)
                        {
                            var Items = Model.GetDinnerItems(Model.MemberToShow.TempSignUp[i]);
                            <td>
                                <select asp-items="Items" name="@Model.comboBoxNames[i]"></select>
                            </td>
                        }
                    </tr>
                </tbody>
            </table>

            <p></p>

            <!-- Weekend Table (Sat–Sun) -->
            <table>
                <thead>
                    <tr>
                        <th>Saturday</th>
                        <th>Sunday</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <!-- Saturday Lunch -->
                        <td>
                            <select asp-items="Model.GetLunchItems(Model.MemberToShow!.TempSignUp[10])"
                                    name="@Model.comboBoxNames[10]"></select>
                        </td>

                        <!-- Sunday Lunch -->
                        <td>
                            <select asp-items="Model.GetLunchItems(Model.MemberToShow.TempSignUp[11])"
                                    name="@Model.comboBoxNames[11]"></select>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Meal Status Info -->
            @if (Model.MemberToShow != null)
            {
                <div class="text-center">
                    <h4>Meal Statuses:</h4>
                    <p><strong>In:</strong> At the meal</p>
                    <p><strong>Out:</strong> Out of the meal</p>
                    <p><strong>Late:</strong> Late plate</p>
                    <p><strong>Early:</strong> Early plate</p>
                    <p><strong>Tardy:</strong> Will not be at lunch until 12</p>
                </div>
            }

            <!-- Save Button -->
            <div class="text-center admin-action">
                <input type="submit" value="Save" asp-page-handler="EditSignUp" class="btn-save" />
            </div>

            <p class="confirmation-message">
                @Model.SaveConfirmationMessage
            </p>
        }
    </div>
</form>